<html>

<head>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        var socket = io.connect('http://localhost:3000');
    </script>
    <script>
        socket.on('joined', (data) => {
            alert(data.message);
        });

        socket.on('broadcast-msg', (data) => {
            console.log(`Message: ${data.message}`)
        })

        function onclickma(socket) {
            socket.emit('broadcast-it', {message: "Broadcasted message for y'all"});
        };

        function getCookie(name) {
            var value = "; " + document.cookie;
            var parts = value.split("; " + name + "=");
            if (parts.length == 2) return parts.pop().split(";").shift();
        }

    </script>
    <style>
        div.massistant:hover {
            color: #f5f5f5;
            cursor: pointer;
            background: linear-gradient(14deg, rgba(15, 184, 173, 1) 0%, rgba(31, 200, 219, 1) 50%, rgba(44, 181, 232, 1) 100%);
        }

        div.massistant {
            position: fixed;
            height: 70px;
            width: 70px;
            background: linear-gradient(14deg, rgba(15, 184, 173, 0.6) 0%, rgba(31, 200, 219, 0.6) 50%, rgba(44, 181, 232, 0.6) 100%);
            margin: -115px 12px 12px 0px;
            right: 0;
            text-align: center;
            line-height: 70px;
            font-size: 30px;
            border: 0px solid transparent;
            border-radius: 100px;
            bottom: 0;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>

<body>
    <h1>Massistant v0.0.1</h1>
    <div onclick="onclickma(socket)" class="massistant">MA</div>
</body>

<script>
    $("body").keyup(function (event) {
        switch (event.key) {
            case "ArrowUp":
                socket.emit('announce', { msg: "Arrow up pressed" });
                break;
            case "ArrowDown":
                socket.emit('announce', { msg: "Arrow down pressed" });
                break;
            case "ArrowLeft":
                socket.emit('announce', { msg: "Arrow left pressed" });
                break;
            case "ArrowRight":
                socket.emit('announce', { msg: "Arrow right pressed" });
                break;
            case "a":
                socket.emit("broadcast-room", { msg: "You're in the room!" });
                break;
        }
    })
</script>

</html>